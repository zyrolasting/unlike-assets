<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>unlike-assets/resolver/default</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="resolver-default.html" class="tocviewselflink" data-pltdoc="x"><span class="stt">unlike-<wbr></wbr>assets/<span class="mywbr"> &nbsp;</span>resolver/<span class="mywbr"> &nbsp;</span>default</span></a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._unlike-assets_resolver_default%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">unlike-<wbr></wbr>assets/<span class="mywbr"> &nbsp;</span>resolver/<span class="mywbr"> &nbsp;</span>default</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._unlike-assets%2Fresolver%2Fdefault..rkt%29._define-hasheq-extension%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">define-<wbr></wbr>hasheq-<wbr></wbr>extension</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">7.6</span></div><h2><a name="(part._unlike-assets_resolver_default)"></a><a name="(mod-path._unlike-assets/resolver/default)"></a><span class="stt">unlike-assets/resolver/default</span></h2><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="stt"> </span><a href="resolver-default.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">unlike-assets/resolver/default</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/unlike-assets" title="Install this package using `raco pkg install unlike-assets`"><span class="stt">unlike-assets</span></a></span></td></tr></table></p><p>The default resolver produces <span class="RktSym"><span class="badlink"><span class="RktValLink">hash-eq?</span></span></span> hashes, and provides
decorators to extend different parts of its functionality.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._unlike-assets/resolver/default..rkt)._define-hasheq-extension))"></a><span title="Provided from: unlike-assets/resolver/default | Package: unlike-assets"><span class="RktSym"><span class="RktSymDef RktSym">define-hasheq-extension</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVar">key-id</span><span class="hspace">&nbsp;</span><span class="RktVar">contract-expr</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">For top level use only. Expands to several definitions that aids
contruction of <span class="RktSym"><span class="badlink"><span class="RktValLink">hash-eq?</span></span></span> hashes with uninterned symbols
for keys.</div></p><p>Defines each <span class="RktVar">key-id</span> as an uninterned symbol with the same content.</p><p>Defines <span style="font-style: italic">and provides</span> the following bindings:</p><ul><li><p><span class="stt">id</span>: A constructor procedure that accepts as many arguments
as there are <span class="RktVar">key-id</span>s. Those arguments must pass their given
contracts, and the argument positions follow the use of
<span class="RktSym">define-hash-extension</span>. Returns a <span class="RktSym"><span class="badlink"><span class="RktValLink">hash-eq?</span></span></span> hash.</p></li><li><p><span class="stt">id?</span>: A predicate that recognizes values returned from <span class="stt">(id ...)</span>.</p></li><li><p><span class="stt">id-key-id</span>: A getter procedure that extracts the value bound to the associated key in a hash.</p></li></ul><p>The intended experience is as follows:</p><ul><li><p>Create contracted definitions for content like <span class="RktSym"><span class="badlink"><span class="RktValLink">struct</span></span></span>,
but without a heirarchial relationship.</p></li><li><p>Allow users to combine different definitions with
<span class="RktSym">hash-union</span>, so that they can "decorate" a data object with
support for different consumers of the object.</p></li><li><p>Ensure no data is lost when using <span class="RktSym">hash-union</span>.</p></li></ul><p>The drawback is that these hashes may appear to have duplicate keys
when printed, because of how uninterned symbols work. But the benefit
of uninterned symbols is that they are unambiguously <span class="RktSym"><span class="badlink"><span class="RktValLink">eq?</span></span></span> in
the eyes of their producers.</p><p>Because the uninterned symbols are not provided to client modules,
they can only access the hash values using getters, and can only
construct complete copies of each hash using the constructor
procedure.</p><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-hasheq-extension</span><span class="hspace">&nbsp;</span><span class="RktSym">publishable</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">due-date</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">date?</span></span></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">send-to-editor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">status/c</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-hasheq-extension</span><span class="hspace">&nbsp;</span><span class="RktSym">serveable</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">handler</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">request?</span><span class="hspace">&nbsp;</span><span class="RktSym">response?</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-hasheq-extension</span><span class="hspace">&nbsp;</span><span class="RktSym">serveable2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">handler</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">request?</span><span class="hspace">&nbsp;</span><span class="RktSym">response?</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">publishable</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">date</span></span></span><span class="hspace">&nbsp;</span><span class="RktMeta"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">lambda</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serveable</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">lambda</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">req</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">s2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serveable2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">lambda</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">req</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">publishable-due-date</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">publishable-send-to-editor</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">smush</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-union</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">s2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">not</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">eq?</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serveable-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">smush</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serveable2-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">smush</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></div><div id="contextindicator">&nbsp;</div></body></html>